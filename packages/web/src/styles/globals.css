@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  .skip-link {
    position: absolute;
    left: -9999px;
    z-index: 9999;
    padding: 1rem 1.5rem;
    background-color: #a0522d;
    color: #fff;
    font-weight: 600;
    text-decoration: none;
    border-radius: 0.25rem;
    transition: none;
  }
  .skip-link:focus,
  .skip-link:focus-visible {
    left: 1rem;
    top: 1rem;
    outline: 3px solid #1a1a18;
    outline-offset: 2px;
  }

  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  :focus { outline: none; }
  :focus-visible { outline: 2px solid #a0522d; outline-offset: 2px; }
  a:focus-visible,
  button:focus-visible { outline: 2px solid #a0522d; outline-offset: 2px; border-radius: 0.125rem; }

  :root {
    --color-cream: #FAF7F0;
    --color-cream-warm: #f3ebe0;
    --color-ink: #1a1a18;
    --color-ink-rgb: 26, 26, 24;
    --color-ink-soft: #4a4a42;
    --color-ink-faint: #8a8578;
    --color-gold: #b8960c;
    --color-gold-muted: #c4a94d;
    --color-terracotta: #a0522d;
    --color-terracotta-rgb: 160, 82, 45;
    --color-sage: #5a6b5a;
    --color-warm-border: #e0d8cc;
    --color-line-rgb: 224, 216, 204;
    --color-tan-50: 250, 247, 240;
    --color-surface: #ffffff;
    --color-surface-alt: #f3ebe0;
    --color-success: #2e7d32;
    --color-warning: #c98c18;
    --color-error: #b03b2e;
    --color-info: #2f5470;
    --section-gap: clamp(40px, 6vh, 72px);
    --section-gap-sm: clamp(28px, 4vh, 48px);
    --max-content-width: 1200px;
  }

  .dark {
    --color-cream: #1a1f1a;
    --color-cream-warm: #242a24;
    --color-ink: #e8e4dc;
    --color-ink-rgb: 232, 228, 220;
    --color-ink-soft: #b8b4aa;
    --color-ink-faint: #8a8578;
    --color-gold: #c4a94d;
    --color-gold-muted: #b8960c;
    --color-terracotta: #c47040;
    --color-terracotta-rgb: 196, 112, 64;
    --color-sage: #7a8e7a;
    --color-warm-border: #3a3830;
    --color-line-rgb: 58, 56, 48;
    --color-tan-50: 26, 31, 26;
    --color-surface: #222822;
    --color-surface-alt: #2a302a;
  }

  ::selection {
    background-color: rgba(var(--color-terracotta-rgb), 0.15);
    color: var(--color-ink);
  }

  body {
    font-family: var(--font-inter), 'Inter', system-ui, sans-serif;
    font-feature-settings: 'kern' 1, 'liga' 1;
    background-color: var(--color-cream);
    color: var(--color-ink);
    letter-spacing: 0.01em;
    line-height: 1.7;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    overflow-x: hidden;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-playfair), 'Playfair Display', Georgia, serif;
    font-weight: 400;
    letter-spacing: -0.02em;
    color: var(--color-ink);
    line-height: 1.15;
  }

  p {
    font-family: var(--font-inter), 'Inter', system-ui, sans-serif;
    font-weight: 400;
    color: var(--color-ink-soft);
    letter-spacing: 0.01em;
    line-height: 1.75;
  }

  /* ============================== */
  /* Font utility classes            */
  /* ============================== */
  .font-display {
    font-family: var(--font-playfair), 'Playfair Display', Georgia, serif;
    font-weight: 400;
    letter-spacing: -0.02em;
  }
  .font-accent {
    font-family: var(--font-playfair), 'Playfair Display', Georgia, serif;
    font-style: italic;
    font-weight: 400;
  }
  .font-editorial {
    font-family: var(--font-playfair), 'Playfair Display', Georgia, serif;
    font-weight: 400;
    line-height: 1.8;
    letter-spacing: -0.01em;
  }
  .font-body, .font-ui {
    font-family: var(--font-inter), 'Inter', system-ui, sans-serif;
    font-weight: 400;
  }

  .text-eyebrow {
    font-family: var(--font-inter), 'Inter', system-ui, sans-serif;
    font-size: 11px;
    font-weight: 500;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--color-terracotta);
  }
  .text-heading {
    font-family: var(--font-playfair), 'Playfair Display', Georgia, serif;
    font-weight: 400;
    letter-spacing: -0.02em;
  }
  .text-display-thin {
    font-family: var(--font-playfair), 'Playfair Display', Georgia, serif;
    font-weight: 400;
    letter-spacing: -0.01em;
  }
  .text-display-wide {
    font-family: var(--font-playfair), 'Playfair Display', Georgia, serif;
    font-weight: 400;
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }
  .text-body-relaxed {
    font-family: var(--font-inter), 'Inter', system-ui, sans-serif;
    font-weight: 400;
    line-height: 1.8;
    letter-spacing: 0.01em;
    color: var(--color-ink-soft);
  }
  .text-caption {
    font-family: var(--font-inter), 'Inter', system-ui, sans-serif;
    font-weight: 500;
    font-size: 0.75rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--color-ink-faint);
  }
  .text-optical-h1 {
    font-family: var(--font-playfair), 'Playfair Display', Georgia, serif;
    font-weight: 400;
    font-size: clamp(2.5rem, 8vw, 5rem);
    letter-spacing: -0.02em;
    line-height: 1.05;
  }
  .text-optical-h2 {
    font-family: var(--font-playfair), 'Playfair Display', Georgia, serif;
    font-weight: 400;
    font-size: clamp(1.75rem, 4vw, 2.75rem);
    letter-spacing: -0.02em;
    line-height: 1.15;
  }
  .text-stat-number {
    font-family: var(--font-playfair), 'Playfair Display', Georgia, serif;
    font-weight: 400;
    font-feature-settings: 'tnum' 1;
    letter-spacing: -0.01em;
  }
}

@layer components {
  /* ============================== */
  /* Section layouts                 */
  /* ============================== */
  .section-base { padding-block: var(--section-gap); position: relative; }
  .section-alt { @apply section-base; background-color: var(--color-cream-warm); }
  .section-contrast { @apply section-base; background-color: var(--color-ink); color: var(--color-cream); }
  .section-contained {
    max-width: var(--max-content-width);
    margin-inline: auto;
    padding-inline: clamp(1.25rem, 4vw, 4rem);
  }

  /* ============================== */
  /* Cards                           */
  /* ============================== */
  .luxury-card {
    background-color: var(--color-surface);
    border-radius: 0.75rem;
    padding: 2rem;
    border: 1px solid var(--color-warm-border);
    transition: transform 0.4s cubic-bezier(0.22, 1, 0.36, 1), box-shadow 0.4s cubic-bezier(0.22, 1, 0.36, 1);
  }
  .luxury-card:hover { transform: translateY(-4px); box-shadow: 0 16px 40px rgba(26, 26, 24, 0.08); }

  .frame-panel {
    padding: clamp(2rem, 5vw, 4rem);
    border-radius: 0.75rem;
    background-color: var(--color-surface);
    border: 1px solid var(--color-warm-border);
  }

  /* ============================== */
  /* Buttons                         */
  /* ============================== */
  .btn-primary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 14px 36px;
    background-color: var(--color-ink);
    color: var(--color-cream);
    font-family: var(--font-inter), 'Inter', system-ui, sans-serif;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    border: none;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);
    position: relative;
    overflow: hidden;
  }
  .btn-primary::after {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--color-terracotta);
    transform: translateX(-101%);
    transition: transform 0.4s cubic-bezier(0.22, 1, 0.36, 1);
  }
  .btn-primary:hover::after { transform: translateX(0); }
  .btn-primary span { position: relative; z-index: 1; }
  .btn-primary:hover { transform: translateY(-1px); }
  .dark .btn-primary { background-color: var(--color-cream); color: var(--color-ink); }

  .btn-link {
    font-family: var(--font-inter), 'Inter', system-ui, sans-serif;
    font-size: 13px;
    color: var(--color-ink-soft);
    background: none;
    border: none;
    border-bottom: 1px solid var(--color-ink-soft);
    padding: 0;
    cursor: pointer;
    transition: color 0.2s ease, border-color 0.2s ease;
  }
  .btn-link:hover { color: var(--color-ink); border-color: var(--color-ink); }

  .cta-primary {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 16px 44px;
    background-color: var(--color-ink);
    color: var(--color-cream);
    font-family: var(--font-inter), 'Inter', system-ui, sans-serif;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    border-radius: 0;
    transition: all 0.4s cubic-bezier(0.22, 1, 0.36, 1);
    position: relative;
    overflow: hidden;
  }
  .cta-primary::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--color-terracotta);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.5s cubic-bezier(0.22, 1, 0.36, 1);
    z-index: 0;
  }
  .cta-primary:hover::before { transform: scaleX(1); }
  .cta-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(var(--color-ink-rgb), 0.15); }
  .cta-primary > * { position: relative; z-index: 1; }
  .dark .cta-primary { background-color: var(--color-cream); color: var(--color-ink); }

  .cta-secondary {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 15px 36px;
    border: 1px solid var(--color-warm-border);
    color: var(--color-ink);
    font-family: var(--font-inter), 'Inter', system-ui, sans-serif;
    font-size: 12px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    background-color: transparent;
    border-radius: 0;
    transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);
  }
  .cta-secondary:hover {
    background-color: var(--color-cream-warm);
    border-color: var(--color-ink-faint);
    transform: translateY(-1px);
  }

  /* ============================== */
  /* Forms                           */
  /* ============================== */
  .form-label {
    display: block;
    font-family: var(--font-inter), 'Inter', system-ui, sans-serif;
    font-weight: 500;
    font-size: 0.875rem;
    color: var(--color-ink);
    margin-bottom: 0.5rem;
    letter-spacing: 0.02em;
  }
  .form-input {
    display: block;
    width: 100%;
    padding: 0.75rem 1rem;
    font-family: var(--font-inter), 'Inter', system-ui, sans-serif;
    font-size: 0.9375rem;
    color: var(--color-ink);
    background-color: var(--color-surface);
    border: 1px solid var(--color-warm-border);
    border-radius: 0.25rem;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
    line-height: 1.5;
  }
  .form-input::placeholder { color: var(--color-ink-faint); }
  .form-input:focus {
    outline: none;
    border-color: var(--color-terracotta);
    box-shadow: 0 0 0 3px rgba(var(--color-terracotta-rgb), 0.1);
  }
  .form-input:disabled { opacity: 0.6; cursor: not-allowed; }

  /* ============================== */
  /* Grain & texture overlays        */
  /* ============================== */
  .grain-overlay {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 9998;
    opacity: 0.03;
    mix-blend-mode: multiply;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 256px 256px;
  }
  .dark .grain-overlay {
    opacity: 0.04;
    mix-blend-mode: screen;
  }

  /* ============================== */
  /* Persian decorative line         */
  /* ============================== */
  .persian-line {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  .persian-line::before,
  .persian-line::after {
    content: '';
    flex: 1;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--color-warm-border), transparent);
  }

  .ornate-divider {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1.5rem;
    padding: 1rem 0;
  }
  .ornate-divider::before,
  .ornate-divider::after {
    content: '';
    width: 60px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--color-gold-muted), transparent);
  }

  /* ============================== */
  /* Image treatments                */
  /* ============================== */
  .image-frame {
    position: relative;
    border-radius: 0.5rem;
    overflow: hidden;
  }
  .image-frame::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    box-shadow: inset 0 0 0 1px rgba(var(--color-ink-rgb), 0.06);
    pointer-events: none;
  }

  .image-grain::after {
    content: '';
    position: absolute;
    inset: 0;
    opacity: 0.08;
    mix-blend-mode: multiply;
    pointer-events: none;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 128 128' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.2' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    background-size: 128px 128px;
  }

  .image-hover-zoom {
    overflow: hidden;
  }
  .image-hover-zoom img {
    transition: transform 0.7s cubic-bezier(0.22, 1, 0.36, 1);
  }
  .image-hover-zoom:hover img {
    transform: scale(1.05);
  }
}

@layer utilities {
  .warm-border { border: 1px solid var(--color-warm-border); }

  .nav-link-gold { position: relative; display: inline-block; }
  .nav-link-gold::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 1px;
    background-color: var(--color-terracotta);
    transition: width 0.3s cubic-bezier(0.22, 1, 0.36, 1);
  }
  .nav-link-gold:hover::after,
  .nav-link-gold[aria-current="page"]::after { width: 100%; }

  /* Smooth scroll reveal animations */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(24px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-32px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(32px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes drawLine {
    from { transform: scaleX(0); }
    to { transform: scaleX(1); }
  }

  @keyframes countUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Horizontal rule animation */
  .animate-draw-line {
    transform-origin: left;
    animation: drawLine 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
  }

  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  @media (forced-colors: active) {
    .cta-primary, .cta-secondary, .btn-primary { border: 2px solid ButtonText; }
    .luxury-card, .frame-panel { border: 1px solid CanvasText; }
    .form-input { border: 1px solid CanvasText; }
    .form-input:focus { outline: 2px solid Highlight; }
  }
}
